<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Menu - Resto Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap"
        rel="stylesheet">
</head>

<body class="bg-gray-50 flex flex-col min-h-screen">
    <!-- Include sidebar -->
    <div data-include="./includes/sidebar.html"></div>

    <div class="lg:pl-64 flex flex-col min-h-screen">
        <!-- Include header -->
        <div data-include="./includes/header.html"></div>

        <!-- Main Content -->
        <main class="flex-grow p-4 md:p-6">
            <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Manajemen Menu</h1>
                    <p class="text-gray-600">Kelola menu dan kategori makanan/minuman</p>
                </div>
                <div class="mt-4 sm:mt-0 flex space-x-3">
                    <button id="btnAddCategory" class="btn btn-outline">
                        <svg class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                                clip-rule="evenodd" />
                        </svg>
                        Kategori Baru
                    </button>
                    <button id="btnAddMenu" class="btn btn-primary">
                        <svg class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                                clip-rule="evenodd" />
                        </svg>
                        Menu Baru
                    </button>
                </div>
            </div>

            <!-- Filter and Search -->
            <div class="card mb-6">
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <div class="w-full md:w-60">
                        <label for="categoryFilter" class="form-label">Kategori</label>
                        <select id="categoryFilter" class="form-select">
                            <option value="">Semua Kategori</option>
                            <!-- Category options will be populated by JS -->
                        </select>
                    </div>
                    <div class="w-full md:w-60">
                        <label for="availabilityFilter" class="form-label">Ketersediaan</label>
                        <select id="availabilityFilter" class="form-select">
                            <option value="">Semua Status</option>
                            <option value="tersedia">Tersedia</option>
                            <option value="habis">Habis</option>
                        </select>
                    </div>
                    <div class="w-full md:flex-1">
                        <label for="menuSearch" class="form-label">Cari</label>
                        <input type="text" id="menuSearch" class="form-input"
                            placeholder="Cari nama atau deskripsi menu...">
                    </div>
                </div>
            </div>

            <!-- Main Content Container -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Categories Sidebar -->
                <div class="lg:col-span-3">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Kategori</h3>
                            <button id="btnReorderCategories" class="text-primary text-sm font-medium">
                                <svg class="h-4 w-4 inline-block" viewBox="0 0 20 20" fill="currentColor">
                                    <path
                                        d="M5 12a1 1 0 102 0V6.414l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L5 6.414V12zM15 8a1 1 0 10-2 0v5.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L15 13.586V8z" />
                                </svg>
                                Atur Urutan
                            </button>
                        </div>
                        <div class="overflow-hidden">
                            <ul id="categoryList" class="divide-y divide-gray-200">
                                <!-- Categories will be populated by JS -->
                                <li class="p-4 text-center text-gray-500">Memuat kategori...</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Menu Content -->
                <div class="lg:col-span-9">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Daftar Menu</h3>
                            <div class="flex space-x-2">
                                <span class="text-sm text-gray-600">Total: <span id="menuCount">0</span> item</span>
                            </div>
                        </div>

                        <!-- Menu Grid -->
                        <div id="menuGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-4">
                            <!-- Menu cards will be populated by JS -->
                            <div class="col-span-full text-center text-gray-500 py-8">
                                Memuat data menu...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Include footer -->
        <div data-include="./includes/footer.html"></div>
    </div>

    <!-- Category Form Modal Template (Hidden) -->
    <template id="categoryFormTemplate">
        <form id="categoryForm" class="space-y-4">
            <div class="form-group">
                <label for="categoryName" class="form-label">Nama Kategori</label>
                <input type="text" id="categoryName" name="nama_kategori" class="form-input" required>
            </div>
            <div class="form-group">
                <label for="categoryOrder" class="form-label">Urutan Tampilan</label>
                <input type="number" id="categoryOrder" name="urutan_tampilan" class="form-input" min="1" value="1"
                    required>
            </div>
            <input type="hidden" id="categoryId" name="category_id">
        </form>
    </template>

    <!-- Menu Form Modal Template (Hidden) -->
    <template id="menuFormTemplate">
        <form id="menuForm" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="form-group">
                    <label for="menuName" class="form-label">Nama Menu</label>
                    <input type="text" id="menuName" name="nama" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="menuCategory" class="form-label">Kategori</label>
                    <select id="menuCategory" name="category_id" class="form-select" required>
                        <option value="">Pilih Kategori</option>
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="menuDescription" class="form-label">Deskripsi</label>
                <textarea id="menuDescription" name="deskripsi" class="form-input" rows="3"></textarea>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="form-group">
                    <label for="menuPrice" class="form-label">Harga (Rp)</label>
                    <input type="number" id="menuPrice" name="harga" class="form-input" min="0" step="1000" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <div class="flex items-center space-x-4 mt-2">
                        <label class="inline-flex items-center">
                            <input type="checkbox" id="menuAvailability" name="status_ketersediaan"
                                class="form-checkbox" value="true" checked>
                            <span class="ml-2">Tersedia</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="checkbox" id="menuEnabled" name="is_enabled" class="form-checkbox" value="true"
                                checked>
                            <span class="ml-2">Aktif</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="menuImage" class="form-label">Gambar Menu</label>
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div id="imagePreview"
                            class="h-24 w-24 bg-gray-100 rounded-md overflow-hidden flex items-center justify-center">
                            <svg id="imageDefault" class="h-8 w-8 text-gray-400" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                                    clip-rule="evenodd" />
                            </svg>
                            <img id="imagePreviewEl" class="h-full w-full object-cover hidden" src="data:,"
                                alt="Preview">
                        </div>
                    </div>
                    <div class="flex-1">
                        <input type="file" id="menuImage" name="image" class="hidden" accept="image/*">
                        <button type="button" id="btnChooseImage" class="btn btn-outline">Pilih Gambar</button>
                        <button type="button" id="btnRemoveImage"
                            class="btn btn-outline text-red-600 ml-2 hidden">Hapus</button>
                        <p class="text-xs text-gray-500 mt-1">Format: JPG, PNG. Ukuran maks: 2MB</p>
                    </div>
                </div>
            </div>

            <input type="hidden" id="menuId" name="menu_id">
            <input type="hidden" id="menuImageUrl" name="image_url">
        </form>
    </template>

    <!-- Category Item Template (Hidden) -->
    <template id="categoryItemTemplate">
        <li class="category-item flex items-center justify-between p-4 hover:bg-gray-50">
            <div class="flex items-center">
                <span class="category-name font-medium text-gray-700"></span>
                <span class="ml-2 text-xs text-gray-500 category-count"></span>
            </div>
            <div class="flex items-center space-x-1">
                <button class="edit-category p-1 text-blue-500 hover:text-blue-700">
                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z">
                        </path>
                    </svg>
                </button>
                <button class="delete-category p-1 text-red-500 hover:text-red-700">
                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </li>
    </template>

    <!-- Menu Card Template (Hidden) -->
    <template id="menuCardTemplate">
        <div class="menu-card bg-white rounded-lg shadow overflow-hidden border border-gray-200">
            <div class="relative h-40 bg-gray-200">
                <img class="menu-image h-full w-full object-cover" src="data:," alt="Menu Image">
                <div class="absolute top-2 right-2 flex space-x-2">
                    <span class="menu-availability badge badge-success">Tersedia</span>
                    <span class="menu-status badge badge-info">Aktif</span>
                </div>
            </div>
            <div class="p-4">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="menu-name text-lg font-semibold text-gray-800 truncate"></h3>
                    <span class="menu-price text-primary font-bold"></span>
                </div>
                <p class="menu-description text-sm text-gray-600 mb-3 line-clamp-2 h-10"></p>
                <div class="flex items-center justify-between mt-2">
                    <span class="menu-category text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded"></span>
                    <div class="flex space-x-1">
                        <button class="edit-menu p-1 text-blue-500 hover:text-blue-700">
                            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z">
                                </path>
                            </svg>
                        </button>
                        <button class="toggle-availability p-1" title="Toggle Availability">
                            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </button>
                        <button class="delete-menu p-1 text-red-500 hover:text-red-700">
                            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Reorder Categories Modal Template (Hidden) -->
    <template id="reorderCategoriesTemplate">
        <div class="space-y-4">
            <p class="text-sm text-gray-600">Drag and drop untuk mengatur urutan kategori</p>
            <ul id="sortableCategoryList" class="bg-gray-50 rounded-md border border-gray-200">
                <!-- Sortable categories will be populated by JS -->
            </ul>
        </div>
    </template>
</body>

</html>